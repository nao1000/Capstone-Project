{% extends 'core/base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/scheduler.css' %}">
{% endblock %}

{% block content %}
    <h2>Availability Selector</h2>

    <div style="margin-bottom: 10px;">
        <label>Name: <input type="text" id="userName" value="{{ request.user.username }}" /></label>
    </div>

    <div id="grid" class="grid"></div>

    <div class="controls">
        <button id="clearBtn" class="btn-secondary">Clear Selection</button>
        <button id="exportBtn" class="btn-primary">Export & Save</button>
    </div>

    <textarea id="out" class="hidden" placeholder="JSON output..."></textarea>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/app.js' %}"></script>
    <script src="{% static 'js/availability.js' %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // We pass the team ID from Django to your JS file here
            initAvailabilityGrid("{{ team.id }}");
        });
    </script>
{% endblock %}